<%- include("template/cabecera", {tituloWeb: 'Detalle de Mascota'}) %>

<div class="container">
    <h1>Detalle Mascota</h1>
    <% if (error) { %>
    <p><%= mensaje %></p>
    <a href="/mascotas" class="btn btn-dark btn-block"> Volver a Mascotas </a>
    <% } %> <% if (!error) { %>
        <form action="PUT">
            <input type="text" class="form-control my-2" name="nombre" value="<%= mascota.nombre %>" >
            <input type="text" class="form-control my-2" name="descripcion" value="<%= mascota.descripcion %>" >
            <button class="btn btn-warning btn-block">
                Editar
            </button>
        </form>
        
        <button
        class="btn btn-danger btn-sm"
        id="btnEliminar"
        data-id="<%= mascota.id %>">
        Eliminar
    </button>
    
    <% } %>
</div>

<%- include("template/footer") %>
<script>
    const btnEliminar = document.querySelector("#btnEliminar");
    btnEliminar.addEventListener("click", async () => {
        const id = btnEliminar.dataset.id;
        try {
            const data = await fetch(`/mascotas/${id}`, {
                method: "delete",
            });
            const res = await data.json();

            if(res.estado){
                window.location.href = '/mascotas'
            }else{
                console.log(res)
            }
            console.log(res);
        } catch (error) {
            console.log(error);
        }
    });
</script>
